<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Management</title>
</head>
<body>

<button onclick="task1()">Task 1</button>
<button onclick="task2()">Task 2</button>
<button onclick="task3()">Task 3</button>
<button onclick="task4()">Task 4</button>
<button onclick="task5()">Task 5</button>
<button onclick="task6()">Task 6</button>

<script>
    // Task 1
    function createProduct(obj, callback1, callback2) {
        const id = Date.now().toString(36);
        obj.id = id;
        callback1(obj);
        callback2(obj);
    }

    function logProduct(product) {
        console.log("Product:");
        console.log(product);
    }

    function logTotalPrice(product) {
        let totalPrice = product.price * product.quantity;
        console.log("Total Price: $" + totalPrice.toFixed(2));
    }

    function task1() {
        console.clear();
        const productObj = {
            name: "Laptop",
            price: 999.99,
            quantity: 2
        };


        createProduct(productObj, logProduct, logTotalPrice);
    }

    // Task 2
    const medicines = {
        "Агалгін": new Date("2022-05-01"),
        "Ношпа": new Date("2025-07-02"),
        "Альфахолін": new Date("2024-12-21"),
        "Аспірин": new Date("2022-08-15"),
        "Аспаркам": new Date("2024-04-18"),
    };

    function task2() {
        console.clear();
        const medicineNames = Object.keys(medicines);
        console.log("Масив з назвами препаратів:", medicineNames);

        const currentDate = new Date();
        const validMedicines = medicineNames.filter(medicine => medicines[medicine] > currentDate);
        console.log("Препарати з актуальним терміном:", validMedicines);

        validMedicines.sort((a, b) => medicines[a] - medicines[b]);
        console.log("Медикаменти у хронологічному порядку:", validMedicines);
    }

    // Task 3
    function applyDiscountAndId(fruits) {
        const discountedFruits = fruits.map((fruit, index) => {
            const discountedPrice = fruit.price * 0.8;
            return { ...fruit, price: discountedPrice, id: index + 1 };
        });

        return discountedFruits;
    }

    function task3() {
        console.clear();
        const fruits = [
            { name: "apple", price: 200 },
            { name: "orange", price: 300 },
            { name: "grapes", price: 750 },
        ];

        const discountedFruits = applyDiscountAndId(fruits);
        console.log(discountedFruits);
    }

    // Task 4
    class Client {
        #login;
        #email;

        constructor(login, email) {
            this.#login = login;
            this.#email = email;
        }
        get login() {
            return this.#login;
        }
        set login(newLogin) {
            this.#login = newLogin;
        }
        get email() {
            return this.#email;
        }
        set email(newEmail) {
            this.#email = newEmail;
        }
    }

    function task4() {
        console.clear();
        const client1 = new Client("user1", "user1@example.com");
        console.log(client1.login);
        console.log(client1.email);

        client1.login = "new_user";
        console.log(client1.login);

        client1.email = "new_user@example.com";
        console.log(client1.email);
    }

    // Task 5
    const tweets = [
        { id: "000", likes: 5, tags: ["js", "nodejs"] },
        { id: "001", likes: 2, tags: ["html", "css"] },
        { id: "002", likes: 17, tags: ["html", "js", "nodejs"] },
        { id: "003", likes: 8, tags: ["css", "react"] },
        { id: "004", likes: 0, tags: ["js", "nodejs", "react"] },
    ];

    function task5() {
        console.clear();
        const tagCount = tweets.reduce((accumulator, tweet) => {
            tweet.tags.forEach(tag => {
                accumulator[tag] = (accumulator[tag] || 0) + 1;
            });
            return accumulator;
        }, {});

        console.log(tagCount);
    }

    // Task 6
    function checkBrackets(str) {
        const stack = [];
        const openingBrackets = ['(', '{', '['];
        const closingBrackets = [')', '}', ']'];

        for (let char of str) {
            if (openingBrackets.includes(char)) {
                stack.push(char);
            } else if (closingBrackets.includes(char)) {
                const correspondingOpeningBracket = openingBrackets[closingBrackets.indexOf(char)];
                if (stack.pop() !== correspondingOpeningBracket) {
                    return false;
                }
            }
        }

        return stack.length === 0;
    }

    function task6() {
        console.clear();
        const code1 = 'function someFn() { return true; }';
        console.log(checkBrackets(code1));

        const code2 = 'function someFn() { return true; ';
        console.log(checkBrackets(code2));
    }
</script>

</body>
</html>
